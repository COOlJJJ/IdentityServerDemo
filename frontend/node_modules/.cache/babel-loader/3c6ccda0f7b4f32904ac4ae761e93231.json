{"remainingRequest":"D:\\MyDemo\\Study\\IdentityServerDemo\\frontend\\node_modules\\babel-loader\\lib\\index.js!D:\\MyDemo\\Study\\IdentityServerDemo\\frontend\\src\\Auth\\applicationusermanager.js","dependencies":[{"path":"D:\\MyDemo\\Study\\IdentityServerDemo\\frontend\\src\\Auth\\applicationusermanager.js","mtime":1649212356975},{"path":"D:\\MyDemo\\Study\\IdentityServerDemo\\frontend\\babel.config.js","mtime":1634788122719},{"path":"D:\\MyDemo\\Study\\IdentityServerDemo\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\MyDemo\\Study\\IdentityServerDemo\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkQ6L015RGVtby9TdHVkeS9JZGVudGl0eVNlcnZlckRlbW8vZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIkQ6L015RGVtby9TdHVkeS9JZGVudGl0eVNlcnZlckRlbW8vZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICJEOi9NeURlbW8vU3R1ZHkvSWRlbnRpdHlTZXJ2ZXJEZW1vL2Zyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcyI7CmltcG9ydCBfaW5oZXJpdHMgZnJvbSAiRDovTXlEZW1vL1N0dWR5L0lkZW50aXR5U2VydmVyRGVtby9mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vaW5oZXJpdHMiOwppbXBvcnQgX2NyZWF0ZVN1cGVyIGZyb20gIkQ6L015RGVtby9TdHVkeS9JZGVudGl0eVNlcnZlckRlbW8vZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZVN1cGVyIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgeyBVc2VyTWFuYWdlciB9IGZyb20gJ29pZGMtY2xpZW50JzsKCnZhciBBcHBsaWNhdGlvblVzZXJNYW5hZ2VyID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfVXNlck1hbmFnZXIpIHsKICBfaW5oZXJpdHMoQXBwbGljYXRpb25Vc2VyTWFuYWdlciwgX1VzZXJNYW5hZ2VyKTsKCiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlcihBcHBsaWNhdGlvblVzZXJNYW5hZ2VyKTsKCiAgZnVuY3Rpb24gQXBwbGljYXRpb25Vc2VyTWFuYWdlcigpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBBcHBsaWNhdGlvblVzZXJNYW5hZ2VyKTsKCiAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgewogICAgICBhdXRob3JpdHk6ICdodHRwOi8vbG9jYWxob3N0OjUwMDInLAogICAgICAvLyDmjojmnYPmnI3liqHkuK3lv4PlnLDlnYAKICAgICAgY2xpZW50X2lkOiAnY29kZV9jbGllbnQnLAogICAgICAvLyDlrqLmiLfnq68gaWQKICAgICAgcmVkaXJlY3RfdXJpOiAnaHR0cDovL2xvY2FsaG9zdDo2Njg4L2NhbGxiYWNrJywKICAgICAgLy8g55m75b2V5Zue6LCD5Zyw5Z2ACiAgICAgIHJlc3BvbnNlX3R5cGU6ICdpZF90b2tlbiB0b2tlbicsCiAgICAgIHNjb3BlOiAnY29kZV9zY29wZTEnLAogICAgICAvLyDkvZznlKjln5/kuZ/opoHkuIDkuIDljLnphY0KICAgICAgcG9zdF9sb2dvdXRfcmVkaXJlY3RfdXJpOiAnaHR0cDovL2xvY2FsaG9zdDo2Njg4JyAvL+eZu+WHuuWQjuWbnuiwg+WcsOWdgAoKICAgIH0pOwogIH0KCiAgX2NyZWF0ZUNsYXNzKEFwcGxpY2F0aW9uVXNlck1hbmFnZXIsIFt7CiAgICBrZXk6ICJsb2dpbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2xvZ2luID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2lnbmluUmVkaXJlY3QoKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgdGhpcy5nZXRVc2VyKCkpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gbG9naW4oKSB7CiAgICAgICAgcmV0dXJuIF9sb2dpbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gbG9naW47CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJsb2dvdXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9sb2dvdXQgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgdGhpcy5zaWdub3V0UmVkaXJlY3QoKSk7CgogICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMiwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGxvZ291dCgpIHsKICAgICAgICByZXR1cm4gX2xvZ291dC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gbG9nb3V0OwogICAgfSgpCiAgfV0pOwoKICByZXR1cm4gQXBwbGljYXRpb25Vc2VyTWFuYWdlcjsKfShVc2VyTWFuYWdlcik7"},{"version":3,"sources":["D:/MyDemo/Study/IdentityServerDemo/frontend/src/Auth/applicationusermanager.js"],"names":["UserManager","ApplicationUserManager","authority","client_id","redirect_uri","response_type","scope","post_logout_redirect_uri","signinRedirect","getUser","signoutRedirect"],"mappings":";;;;;;AAAA,SAASA,WAAT,QAA4B,aAA5B;;IAEMC,sB;;;;;AACJ,oCAAe;AAAA;;AAAA,6BACP;AACJC,MAAAA,SAAS,EAAE,uBADP;AAC+B;AACnCC,MAAAA,SAAS,EAAE,aAFP;AAEqB;AACzBC,MAAAA,YAAY,EAAE,gCAHV;AAG2C;AAC/CC,MAAAA,aAAa,EAAE,gBAJX;AAKJC,MAAAA,KAAK,EAAE,aALH;AAKiB;AACrBC,MAAAA,wBAAwB,EAAE,uBANtB,CAM8C;;AAN9C,KADO;AASd;;;;;2EAED;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACQ,KAAKC,cAAL,EADR;;AAAA;AAAA,iDAES,KAAKC,OAAL,EAFT;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,O;;;;;;;;;;;4EAKA;AAAA;AAAA;AAAA;AAAA;AAAA,kDACS,KAAKC,eAAL,EADT;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,O;;;;;;;;;;;EAjBmCV,W","sourcesContent":["import { UserManager } from 'oidc-client'\r\n\r\nclass ApplicationUserManager extends UserManager {\r\n  constructor () {\r\n    super({\r\n      authority: 'http://localhost:5002',// 授权服务中心地址\r\n      client_id: 'code_client',// 客户端 id\r\n      redirect_uri: 'http://localhost:6688/callback',// 登录回调地址\r\n      response_type: 'id_token token',\r\n      scope: 'code_scope1',// 作用域也要一一匹配\r\n      post_logout_redirect_uri: 'http://localhost:6688' //登出后回调地址\r\n    })\r\n  }\r\n\r\n  async login () {\r\n    await this.signinRedirect()\r\n    return this.getUser()\r\n  }\r\n\r\n  async logout () {\r\n    return this.signoutRedirect()\r\n  }\r\n}"]}]}