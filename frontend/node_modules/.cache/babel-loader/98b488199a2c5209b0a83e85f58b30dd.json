{"remainingRequest":"D:\\MyDemo\\Study\\IdentityServerDemo\\frontend\\node_modules\\babel-loader\\lib\\index.js!D:\\MyDemo\\Study\\IdentityServerDemo\\frontend\\src\\Auth\\UserAuth.js","dependencies":[{"path":"D:\\MyDemo\\Study\\IdentityServerDemo\\frontend\\src\\Auth\\UserAuth.js","mtime":1649212380095},{"path":"D:\\MyDemo\\Study\\IdentityServerDemo\\frontend\\babel.config.js","mtime":1634788122719},{"path":"D:\\MyDemo\\Study\\IdentityServerDemo\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\MyDemo\\Study\\IdentityServerDemo\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkQ6L015RGVtby9TdHVkeS9JZGVudGl0eVNlcnZlckRlbW8vZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgYXBwbGljYXRpb25Vc2VyTWFuYWdlciBmcm9tICIuL2FwcGxpY2F0aW9udXNlcm1hbmFnZXIiOwp2YXIgdXNlckF1dGggPSB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHVzZXI6IHsKICAgICAgICBuYW1lOiAiIiwKICAgICAgICBpc0F1dGhlbnRpY2F0ZWQ6IGZhbHNlCiAgICAgIH0KICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICByZWZyZXNoVXNlckluZm86IGZ1bmN0aW9uIHJlZnJlc2hVc2VySW5mbygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIHVzZXI7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gYXBwbGljYXRpb25Vc2VyTWFuYWdlci5nZXRVc2VyKCk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIHVzZXIgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICAgIGlmICh1c2VyKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzLnVzZXIubmFtZSA9IHVzZXIucHJvZmlsZS5uYW1lOwogICAgICAgICAgICAgICAgICBfdGhpcy51c2VyLmlzQXV0aGVudGljYXRlZCA9IHRydWU7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBfdGhpcy51c2VyLm5hbWUgPSAiIjsKICAgICAgICAgICAgICAgICAgX3RoaXMudXNlci5pc0F1dGhlbnRpY2F0ZWQgPSBmYWxzZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyLnJlZnJlc2hVc2VySW5mbygpOwoKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTIpOwogICAgfSkpKCk7CiAgfQp9OwpleHBvcnQgZGVmYXVsdCB1c2VyQXV0aDs="},{"version":3,"sources":["D:/MyDemo/Study/IdentityServerDemo/frontend/src/Auth/UserAuth.js"],"names":["applicationUserManager","userAuth","data","user","name","isAuthenticated","methods","refreshUserInfo","getUser","profile","created"],"mappings":";;;AAAA,OAAOA,sBAAP,MAAmC,0BAAnC;AACA,IAAMC,QAAQ,GAAG;AACfC,EAAAA,IADe,kBACR;AACL,WAAO;AACLC,MAAAA,IAAI,EAAE;AACJC,QAAAA,IAAI,EAAE,EADF;AAEJC,QAAAA,eAAe,EAAE;AAFb;AADD,KAAP;AAMD,GARc;AASfC,EAAAA,OAAO,EAAE;AACDC,IAAAA,eADC,6BACiB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACHP,sBAAsB,CAACQ,OAAvB,EADG;;AAAA;AAChBL,gBAAAA,IADgB;;AAEtB,oBAAIA,IAAJ,EAAU;AACR,kBAAA,KAAI,CAACA,IAAL,CAAUC,IAAV,GAAiBD,IAAI,CAACM,OAAL,CAAaL,IAA9B;AACA,kBAAA,KAAI,CAACD,IAAL,CAAUE,eAAV,GAA4B,IAA5B;AACD,iBAHD,MAGO;AACL,kBAAA,KAAI,CAACF,IAAL,CAAUC,IAAV,GAAiB,EAAjB;AACA,kBAAA,KAAI,CAACD,IAAL,CAAUE,eAAV,GAA4B,KAA5B;AACD;;AARqB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASvB;AAVM,GATM;AAqBTK,EAAAA,OArBS,qBAqBC;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACR,MAAI,CAACH,eAAL,EADQ;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEf;AAvBc,CAAjB;AAyBA,eAAeN,QAAf","sourcesContent":["import applicationUserManager from \"./applicationusermanager\";\r\nconst userAuth = {\r\n  data() {\r\n    return {\r\n      user: {\r\n        name: \"\",\r\n        isAuthenticated: false\r\n      }\r\n    };\r\n  },\r\n  methods: {\r\n    async refreshUserInfo() {//获取用户信息\r\n      const user = await applicationUserManager.getUser();\r\n      if (user) {\r\n        this.user.name = user.profile.name;\r\n        this.user.isAuthenticated = true;\r\n      } else {\r\n        this.user.name = \"\";\r\n        this.user.isAuthenticated = false;\r\n      }\r\n    }\r\n  },\r\n  async created() {\r\n    await this.refreshUserInfo();\r\n  }\r\n};\r\nexport default userAuth;"]}]}